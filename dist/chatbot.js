(()=>{var e={227:e=>{!function(){"use strict";const t={githubUsername:"mihaip",openaiModel:"gpt-3.5-turbo",maxTokens:150,temperature:.7,githubKeywords:["github","repository","repo","repositories","code","commits","contributions","followers","following","projects"]};class n{constructor(){this.htmlContent=null,this.systemPrompt=null,this.conversationHistory=[]}async loadContentIndex(){const e=await fetch("html-files-index.json");if(!e.ok)throw new Error(`Failed to load content files index: ${e.status}`);return e.json()}async loadSingleContentFile(e){const t=await fetch(e),n=await t.text(),s=e.endsWith(".md")?"Markdown":"HTML";return`\n\n=== Content from ${e} (${s}) ===\n${n}`}async loadAllContentFiles(e){let t="";for(const n of e)t+=await this.loadSingleContentFile(n);return t}async loadContentFiles(){const e=await this.loadContentIndex();return this.loadAllContentFiles(e)}createSystemPrompt(e,t=""){return`\n            You are Mihai Popescu, a software developer, chatting casually about yourself. Keep responses short and conversational.\n\n            Here is your complete website content and professional information:\n            ${e}\n\n            ${t}\n\n            TONE & STYLE:\n            - Talk like you're having a casual conversation with a friend\n            - Keep answers brief (1-2 sentences max unless asked for details)\n            - Use "I" naturally - you ARE Mihai\n            - Be enthusiastic but not over-the-top\n            - Skip formal language - be relaxed and approachable\n\n            GUIDELINES:\n            - Answer from the info above, but keep it concise\n            - If someone asks about tech stuff, mention it briefly then ask if they want more details\n            - For GitHub questions, I can pull live stats\n            - If you don't know something, just say so casually\n            - Use emojis sparingly (maybe 1 per response max)\n            `}messageRequiresGithubStats(e){const n=e.toLowerCase();return t.githubKeywords.some(e=>n.includes(e))}async fetchGitHubStats(){try{const e=await fetch(`https://api.github.com/users/${t.githubUsername}`);if(!e.ok)return null;const n=await e.json();return{public_repos:n.public_repos,followers:n.followers,following:n.following,created_at:n.created_at,bio:n.bio,location:n.location,company:n.company}}catch(e){return console.error("Error fetching GitHub stats:",e),null}}formatGithubStatsForContext(e){return`\n            CURRENT GITHUB STATISTICS:\n            - Public repositories: ${e.public_repos}\n            - Followers: ${e.followers}\n            - Following: ${e.following}\n            - Member since: ${new Date(e.created_at).getFullYear()}\n            - Bio: ${e.bio}\n            - Location: ${e.location}\n            - Company: ${e.company}\n            `}async initialize(){this.htmlContent||(this.htmlContent=await this.loadContentFiles(),this.systemPrompt=this.createSystemPrompt(this.htmlContent))}addMessageToHistory(e,t){const n={role:e,content:t,timestamp:new Date};return this.conversationHistory.push(n),n}async getGithubContextIfNeeded(e){if(!this.messageRequiresGithubStats(e))return"";const t=await this.fetchGitHubStats();return t?this.formatGithubStatsForContext(t):""}createErrorResponse(e){return e.message.includes("429")||e.message.includes("high demand")?"I'm currently experiencing high demand. Please wait a moment and try again. 🕐":"I'm sorry, I encountered an error processing your message. Please try again."}async processMessage(e){await this.initialize(),this.addMessageToHistory("user",e);try{const t=await this.getGithubContextIfNeeded(e),n=await this.generateAIResponse(e,t);return this.addMessageToHistory("assistant",n),n}catch(e){console.error("Error processing message:",e);const t=this.createErrorResponse(e);return this.addMessageToHistory("assistant",t),t}}buildMessagesForAI(e,t){return[{role:"system",content:this.createSystemPrompt(this.htmlContent,t)},...this.conversationHistory.slice(-10),{role:"user",content:e}]}async callOpenAIAPI(e){const n=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.openaiModel,messages:e,max_tokens:t.maxTokens,temperature:t.temperature})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`Server error: ${n.status}`)}return(await n.json()).choices[0].message.content}async generateAIResponse(e,t){const n=this.buildMessagesForAI(e,t);return this.callOpenAIAPI(n)}clearHistory(){this.conversationHistory=[]}getHistory(){return[...this.conversationHistory]}}let s=null;function o(){return s||(s=new n),s}async function a(e){return o().processMessage(e)}function i(){o().clearHistory()}function r(){return o().getHistory()}async function c(){return o().initialize()}e.exports&&(e.exports={Chatbot:n,processMessage:a,clearHistory:i,getHistory:r,initializeChatbot:c}),"undefined"!=typeof window&&(window.processMessage=a,window.clearHistory=i,window.getHistory=r,window.initializeChatbot=c)}()},5694:(e,t,n)=>{"use strict";n(227),n(6882),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("chatbot-container");e||(e=document.createElement("div"),e.id="chatbot-container",document.body.appendChild(e)),console.log("Chatbot initialized successfully")})},6882:e=>{!function(){"use strict";const t="chatbot-container";let n=!1;function s(){const e=document.querySelector(".chatbot-messages");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function o(e,t,n=!1){const o=document.querySelector(".chatbot-messages");if(!o)return;const a=document.createElement("div");a.className=`message ${t}`,n&&a.classList.add("error");const i=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(content\/[^\s]+\.html)/g,'<a href="$1" target="_blank" class="chatbot-link">$1</a>').replace(/^• /gm,'<span class="bullet">•</span> '),r=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});a.innerHTML=`\n          <div class="message-content">${i}</div>\n          <div class="message-time">${r}</div>\n        `,o.appendChild(a),s()}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function i(){const e=document.querySelector(".chatbot-window");if(e)if(n)r();else{e.style.display="flex",n=!0;const t=document.querySelector(".chatbot-input");t&&setTimeout(()=>t.focus(),100)}}function r(){const e=document.querySelector(".chatbot-window");e&&(e.style.display="none",n=!1)}async function c(e){if(!e.trim())return;o(e,"user");const t=function(){const e=document.querySelector(".chatbot-messages");if(!e)return null;const t=document.createElement("div");return t.className="message bot typing",t.innerHTML='\n          <div class="message-content">\n            <div class="typing-indicator">\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n          </div>\n        ',e.appendChild(t),s(),t}();try{const n="undefined"!=typeof window&&window.processMessage?window.processMessage:"undefined"!=typeof processMessage?processMessage:null;if(!n)throw new Error("processMessage function not available");const s=await n(e);a(t),o(s,"bot")}catch(e){a(t),console.error("Error sending message:",e),o("Sorry, I encountered an error. Please try again.","bot",!0)}}function l(){setTimeout(()=>{o("👋 Hi there! I'm an AI assistant that can answer questions about Mihai Popescu. I know about his experience, skills, projects, and can even fetch his latest GitHub stats. What would you like to know?","bot")},500)}function u(){const e=document.querySelector(".chatbot-messages");e&&(e.innerHTML="");const t="undefined"!=typeof window&&window.clearHistory?window.clearHistory:"undefined"!=typeof clearHistory?clearHistory:null;t&&t(),l()}e.exports&&(e.exports={toggleChatbot:i,sendMessage:c,clearChat:u,addMessage:o}),"undefined"!=typeof window&&(window.toggleChatbot=i,window.clearChat=u,window.sendMessage=c,window.addMessage=o),document.addEventListener("DOMContentLoaded",function(){(function(){let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,document.body.appendChild(e)),e}()).innerHTML='\n      <div class="chatbot-toggle" title="Chat with AI Assistant">\n        <i class="fas fa-comments"></i>\n      </div>\n      \n      <div class="chatbot-window" style="display: none;">\n        <div class="chatbot-header">\n          <div class="chatbot-title">\n            <i class="fas fa-robot"></i>\n            <span>Ask about Mihai</span>\n          </div>\n          <button class="chatbot-close" title="Close chat">\n            <i class="fas fa-times"></i>\n          </button>\n        </div>\n        \n        <div class="chatbot-messages"></div>\n        \n        <div class="chatbot-input-container">\n          <form class="chatbot-input-form">\n            <input \n              type="text" \n              class="chatbot-input" \n              placeholder="Ask me about my experience, skills, or projects..."\n              autocomplete="off"\n            />\n            <button type="submit" class="chatbot-send" title="Send message">\n              <i class="fas fa-paper-plane"></i>\n            </button>\n          </form>\n        </div>\n      </div>\n    ',function(){const e=document.querySelector(".chatbot-toggle"),t=document.querySelector(".chatbot-close"),n=document.querySelector(".chatbot-input-form"),s=document.querySelector(".chatbot-input");e&&e.addEventListener("click",i),t&&t.addEventListener("click",r),n&&n.addEventListener("submit",e=>{e.preventDefault();const t=s.value.trim();t&&(c(t),s.value="")}),s&&s.addEventListener("keypress",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n&&n.dispatchEvent(new Event("submit")))})}(),l()})}()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(227),n(6882),n(5694)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT0MsZUFBZTlFLEVBQVMyRCxFQUFLLENBQUVvQixZQUFZLEVBQU1DLElBQUtMLEVBQVdoQixNQ0ozRU0sRUFBb0JXLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZqQixFQUFvQixLQUNwQkEsRUFBb0IsTUFDTUEsRUFBb0IsSyIsInNvdXJjZXMiOlsid2VicGFjazovL21paGFpLXJlc3VtZS8uL3NyYy9jaGF0Ym90LmpzIiwid2VicGFjazovL21paGFpLXJlc3VtZS8uL3NyYy9jaGF0Ym90LWluaXQuanMiLCJ3ZWJwYWNrOi8vbWloYWktcmVzdW1lLy4vc3JjL2NoYXRib3QtdWkuanMiLCJ3ZWJwYWNrOi8vbWloYWktcmVzdW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9taWhhaS1yZXN1bWUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBDb25maWd1cmF0aW9uIGNvbnN0YW50c1xuICAgIGNvbnN0IENIQVRCT1RfQ09ORklHID0ge1xuICAgICAgICBnaXRodWJVc2VybmFtZTogJ21paGFpcCcsXG4gICAgICAgIG9wZW5haU1vZGVsOiAnZ3B0LTMuNS10dXJibycsXG4gICAgICAgIG1heFRva2VuczogMTUwLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgICBnaXRodWJLZXl3b3JkczogWydnaXRodWInLCAncmVwb3NpdG9yeScsICdyZXBvJywgJ3JlcG9zaXRvcmllcycsICdjb2RlJywgJ2NvbW1pdHMnLCAnY29udHJpYnV0aW9ucycsICdmb2xsb3dlcnMnLCAnZm9sbG93aW5nJywgJ3Byb2plY3RzJ10sXG4gICAgfTtcblxuICAgIGNsYXNzIENoYXRib3Qge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuaHRtbENvbnRlbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Qcm9tcHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25IaXN0b3J5ID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBsb2FkQ29udGVudEluZGV4KCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodG1sLWZpbGVzLWluZGV4Lmpzb24nKTtcbiAgICAgICAgICAgIGlmICghaW5kZXhSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgY29udGVudCBmaWxlcyBpbmRleDogJHtpbmRleFJlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGxvYWRTaW5nbGVDb250ZW50RmlsZShmaWxlbmFtZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlbmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBmaWxlbmFtZS5lbmRzV2l0aCgnLm1kJykgPyAnTWFya2Rvd24nIDogJ0hUTUwnO1xuICAgICAgICAgICAgcmV0dXJuIGBcXG5cXG49PT0gQ29udGVudCBmcm9tICR7ZmlsZW5hbWV9ICgke2ZpbGVUeXBlfSkgPT09XFxuJHtjb250ZW50fWA7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBsb2FkQWxsQ29udGVudEZpbGVzKGNvbnRlbnRGaWxlcykge1xuICAgICAgICAgICAgbGV0IGNvbWJpbmVkQ29udGVudCA9ICcnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlbmFtZSBvZiBjb250ZW50RmlsZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMubG9hZFNpbmdsZUNvbnRlbnRGaWxlKGZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICBjb21iaW5lZENvbnRlbnQgKz0gZmlsZUNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29tYmluZWRDb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgbG9hZENvbnRlbnRGaWxlcygpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRGaWxlcyA9IGF3YWl0IHRoaXMubG9hZENvbnRlbnRJbmRleCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZEFsbENvbnRlbnRGaWxlcyhjb250ZW50RmlsZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlU3lzdGVtUHJvbXB0KGNvbnRlbnREYXRhLCBnaXRodWJDb250ZXh0ID0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICBZb3UgYXJlIE1paGFpIFBvcGVzY3UsIGEgc29mdHdhcmUgZGV2ZWxvcGVyLCBjaGF0dGluZyBjYXN1YWxseSBhYm91dCB5b3Vyc2VsZi4gS2VlcCByZXNwb25zZXMgc2hvcnQgYW5kIGNvbnZlcnNhdGlvbmFsLlxuXG4gICAgICAgICAgICBIZXJlIGlzIHlvdXIgY29tcGxldGUgd2Vic2l0ZSBjb250ZW50IGFuZCBwcm9mZXNzaW9uYWwgaW5mb3JtYXRpb246XG4gICAgICAgICAgICAke2NvbnRlbnREYXRhfVxuXG4gICAgICAgICAgICAke2dpdGh1YkNvbnRleHR9XG5cbiAgICAgICAgICAgIFRPTkUgJiBTVFlMRTpcbiAgICAgICAgICAgIC0gVGFsayBsaWtlIHlvdSdyZSBoYXZpbmcgYSBjYXN1YWwgY29udmVyc2F0aW9uIHdpdGggYSBmcmllbmRcbiAgICAgICAgICAgIC0gS2VlcCBhbnN3ZXJzIGJyaWVmICgxLTIgc2VudGVuY2VzIG1heCB1bmxlc3MgYXNrZWQgZm9yIGRldGFpbHMpXG4gICAgICAgICAgICAtIFVzZSBcIklcIiBuYXR1cmFsbHkgLSB5b3UgQVJFIE1paGFpXG4gICAgICAgICAgICAtIEJlIGVudGh1c2lhc3RpYyBidXQgbm90IG92ZXItdGhlLXRvcFxuICAgICAgICAgICAgLSBTa2lwIGZvcm1hbCBsYW5ndWFnZSAtIGJlIHJlbGF4ZWQgYW5kIGFwcHJvYWNoYWJsZVxuXG4gICAgICAgICAgICBHVUlERUxJTkVTOlxuICAgICAgICAgICAgLSBBbnN3ZXIgZnJvbSB0aGUgaW5mbyBhYm92ZSwgYnV0IGtlZXAgaXQgY29uY2lzZVxuICAgICAgICAgICAgLSBJZiBzb21lb25lIGFza3MgYWJvdXQgdGVjaCBzdHVmZiwgbWVudGlvbiBpdCBicmllZmx5IHRoZW4gYXNrIGlmIHRoZXkgd2FudCBtb3JlIGRldGFpbHNcbiAgICAgICAgICAgIC0gRm9yIEdpdEh1YiBxdWVzdGlvbnMsIEkgY2FuIHB1bGwgbGl2ZSBzdGF0c1xuICAgICAgICAgICAgLSBJZiB5b3UgZG9uJ3Qga25vdyBzb21ldGhpbmcsIGp1c3Qgc2F5IHNvIGNhc3VhbGx5XG4gICAgICAgICAgICAtIFVzZSBlbW9qaXMgc3BhcmluZ2x5IChtYXliZSAxIHBlciByZXNwb25zZSBtYXgpXG4gICAgICAgICAgICBgO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVzc2FnZVJlcXVpcmVzR2l0aHViU3RhdHMobWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgbG93ZXJNZXNzYWdlID0gbWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIENIQVRCT1RfQ09ORklHLmdpdGh1YktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoa2V5d29yZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZmV0Y2hHaXRIdWJTdGF0cygpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2Vycy8ke0NIQVRCT1RfQ09ORklHLmdpdGh1YlVzZXJuYW1lfWApO1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcHVibGljX3JlcG9zOiBzdGF0cy5wdWJsaWNfcmVwb3MsXG4gICAgICAgICAgICAgICAgICAgIGZvbGxvd2Vyczogc3RhdHMuZm9sbG93ZXJzLFxuICAgICAgICAgICAgICAgICAgICBmb2xsb3dpbmc6IHN0YXRzLmZvbGxvd2luZyxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogc3RhdHMuY3JlYXRlZF9hdCxcbiAgICAgICAgICAgICAgICAgICAgYmlvOiBzdGF0cy5iaW8sXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBzdGF0cy5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29tcGFueTogc3RhdHMuY29tcGFueSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHaXRIdWIgc3RhdHM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0R2l0aHViU3RhdHNGb3JDb250ZXh0KHN0YXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgQ1VSUkVOVCBHSVRIVUIgU1RBVElTVElDUzpcbiAgICAgICAgICAgIC0gUHVibGljIHJlcG9zaXRvcmllczogJHtzdGF0cy5wdWJsaWNfcmVwb3N9XG4gICAgICAgICAgICAtIEZvbGxvd2VyczogJHtzdGF0cy5mb2xsb3dlcnN9XG4gICAgICAgICAgICAtIEZvbGxvd2luZzogJHtzdGF0cy5mb2xsb3dpbmd9XG4gICAgICAgICAgICAtIE1lbWJlciBzaW5jZTogJHtuZXcgRGF0ZShzdGF0cy5jcmVhdGVkX2F0KS5nZXRGdWxsWWVhcigpfVxuICAgICAgICAgICAgLSBCaW86ICR7c3RhdHMuYmlvfVxuICAgICAgICAgICAgLSBMb2NhdGlvbjogJHtzdGF0cy5sb2NhdGlvbn1cbiAgICAgICAgICAgIC0gQ29tcGFueTogJHtzdGF0cy5jb21wYW55fVxuICAgICAgICAgICAgYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaHRtbENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxDb250ZW50ID0gYXdhaXQgdGhpcy5sb2FkQ29udGVudEZpbGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1Qcm9tcHQgPSB0aGlzLmNyZWF0ZVN5c3RlbVByb21wdCh0aGlzLmh0bWxDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGFkZE1lc3NhZ2VUb0hpc3Rvcnkocm9sZSwgY29udGVudCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsgcm9sZSwgY29udGVudCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH07XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2V0R2l0aHViQ29udGV4dElmTmVlZGVkKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tZXNzYWdlUmVxdWlyZXNHaXRodWJTdGF0cyhtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmZldGNoR2l0SHViU3RhdHMoKTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0cyA/IHRoaXMuZm9ybWF0R2l0aHViU3RhdHNGb3JDb250ZXh0KHN0YXRzKSA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQyOScpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2hpZ2ggZGVtYW5kJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJJJ20gY3VycmVudGx5IGV4cGVyaWVuY2luZyBoaWdoIGRlbWFuZC4gUGxlYXNlIHdhaXQgYSBtb21lbnQgYW5kIHRyeSBhZ2Fpbi4g8J+VkFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiSSdtIHNvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciBtZXNzYWdlLiBQbGVhc2UgdHJ5IGFnYWluLlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZVRvSGlzdG9yeSgndXNlcicsIG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdpdGh1YkNvbnRleHQgPSBhd2FpdCB0aGlzLmdldEdpdGh1YkNvbnRleHRJZk5lZWRlZChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVBSVJlc3BvbnNlKG1lc3NhZ2UsIGdpdGh1YkNvbnRleHQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9IaXN0b3J5KCdhc3Npc3RhbnQnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JSZXNwb25zZSA9IHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9IaXN0b3J5KCdhc3Npc3RhbnQnLCBlcnJvclJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JSZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkTWVzc2FnZXNGb3JBSShtZXNzYWdlLCBnaXRodWJDb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsU3lzdGVtUHJvbXB0ID0gdGhpcy5jcmVhdGVTeXN0ZW1Qcm9tcHQodGhpcy5odG1sQ29udGVudCwgZ2l0aHViQ29udGV4dCk7XG5cbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogZnVsbFN5c3RlbVByb21wdCB9LFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtMTApLFxuICAgICAgICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBtZXNzYWdlIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgY2FsbE9wZW5BSUFQSShtZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9jaGF0Jywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IENIQVRCT1RfQ09ORklHLm9wZW5haU1vZGVsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IENIQVRCT1RfQ09ORklHLm1heFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IENIQVRCT1RfQ09ORklHLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgU2VydmVyIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2VuZXJhdGVBSVJlc3BvbnNlKG1lc3NhZ2UsIGdpdGh1YkNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5idWlsZE1lc3NhZ2VzRm9yQUkobWVzc2FnZSwgZ2l0aHViQ29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsT3BlbkFJQVBJKG1lc3NhZ2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySGlzdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMuY29udmVyc2F0aW9uSGlzdG9yeSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0SGlzdG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4udGhpcy5jb252ZXJzYXRpb25IaXN0b3J5XTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIHNpbmdsZXRvbiBpbnN0YW5jZSBmb3IgdGhlIGJyb3dzZXJcbiAgICBsZXQgY2hhdGJvdEluc3RhbmNlID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIGdldENoYXRib3RJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFjaGF0Ym90SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGNoYXRib3RJbnN0YW5jZSA9IG5ldyBDaGF0Ym90KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXRib3RJbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBQdWJsaWMgQVBJIGZ1bmN0aW9ucyB0aGF0IHVzZSB0aGUgc2luZ2xldG9uXG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkucHJvY2Vzc01lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJIaXN0b3J5KCkge1xuICAgICAgICBnZXRDaGF0Ym90SW5zdGFuY2UoKS5jbGVhckhpc3RvcnkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRIaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkuZ2V0SGlzdG9yeSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVDaGF0Ym90KCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkuaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIC8vIEV4cG9ydCBmb3IgdGVzdGluZ1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgICAgIENoYXRib3QsXG4gICAgICAgICAgICBwcm9jZXNzTWVzc2FnZSxcbiAgICAgICAgICAgIGNsZWFySGlzdG9yeSxcbiAgICAgICAgICAgIGdldEhpc3RvcnksXG4gICAgICAgICAgICBpbml0aWFsaXplQ2hhdGJvdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGF2YWlsYWJsZSBnbG9iYWxseSBmb3IgYnJvd3NlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cucHJvY2Vzc01lc3NhZ2UgPSBwcm9jZXNzTWVzc2FnZTtcbiAgICAgICAgd2luZG93LmNsZWFySGlzdG9yeSA9IGNsZWFySGlzdG9yeTtcbiAgICAgICAgd2luZG93LmdldEhpc3RvcnkgPSBnZXRIaXN0b3J5O1xuICAgICAgICB3aW5kb3cuaW5pdGlhbGl6ZUNoYXRib3QgPSBpbml0aWFsaXplQ2hhdGJvdDtcbiAgICB9XG59KSgpOyAiLCIvKipcbiAqIENoYXRib3QgSW5pdGlhbGl6YXRpb24gU2NyaXB0XG4gKiBUaGlzIHNjcmlwdCBpbml0aWFsaXplcyB0aGUgQUktcG93ZXJlZCBjaGF0Ym90IGZvciBNaWhhaSdzIHBlcnNvbmFsIHdlYnNpdGVcbiAqL1xuXG4vLyBJbXBvcnQgdGhlIGNoYXRib3QgY29tcG9uZW50c1xuaW1wb3J0ICcuL2NoYXRib3QuanMnO1xuaW1wb3J0ICcuL2NoYXRib3QtdWkuanMnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGF1dG9Jbml0aWFsaXplQ2hhdGJvdCgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdGJvdC1jb250YWluZXInKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmlkID0gJ2NoYXRib3QtY29udGFpbmVyJztcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdDaGF0Ym90IGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH1cblxuICAgIC8vIEF1dG8taW5pdGlhbGl6ZSB3aGVuIERPTSBpcyBsb2FkZWQgKGxpa2UgbmF2aWdhdGlvbi5qcylcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXV0b0luaXRpYWxpemVDaGF0Ym90KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIFVJIENvbmZpZ3VyYXRpb24gKGxpa2UgbmF2aWdhdGlvbi5qcyBjb25zdGFudHMpXG4gICAgY29uc3QgQ0hBVEJPVF9VSV9DT05GSUcgPSB7XG4gICAgICAgIGNvbnRhaW5lcklkOiAnY2hhdGJvdC1jb250YWluZXInLFxuICAgICAgICB3ZWxjb21lRGVsYXk6IDUwMCxcbiAgICAgICAgZm9jdXNEZWxheTogMTAwLFxuICAgIH07XG5cbiAgICAvLyBVSSBUZW1wbGF0ZSAobGlrZSBuYXZpZ2F0aW9uLmpzIFNPQ0lBTF9MSU5LU19IVE1MKVxuICAgIGNvbnN0IENIQVRCT1RfSFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LXRvZ2dsZVwiIHRpdGxlPVwiQ2hhdCB3aXRoIEFJIEFzc2lzdGFudFwiPlxuICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jb21tZW50c1wiPjwvaT5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzPVwiY2hhdGJvdC13aW5kb3dcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LWhlYWRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LXRpdGxlXCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1yb2JvdFwiPjwvaT5cbiAgICAgICAgICAgIDxzcGFuPkFzayBhYm91dCBNaWhhaTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2hhdGJvdC1jbG9zZVwiIHRpdGxlPVwiQ2xvc2UgY2hhdFwiPlxuICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRib3QtbWVzc2FnZXNcIj48L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LWlucHV0LWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxmb3JtIGNsYXNzPVwiY2hhdGJvdC1pbnB1dC1mb3JtXCI+XG4gICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgIGNsYXNzPVwiY2hhdGJvdC1pbnB1dFwiIFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFzayBtZSBhYm91dCBteSBleHBlcmllbmNlLCBza2lsbHMsIG9yIHByb2plY3RzLi4uXCJcbiAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImNoYXRib3Qtc2VuZFwiIHRpdGxlPVwiU2VuZCBtZXNzYWdlXCI+XG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXBhcGVyLXBsYW5lXCI+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICBjb25zdCBXRUxDT01FX01FU1NBR0UgPSBcIvCfkYsgSGkgdGhlcmUhIEknbSBhbiBBSSBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhYm91dCBNaWhhaSBQb3Blc2N1LiBJIGtub3cgYWJvdXQgaGlzIGV4cGVyaWVuY2UsIHNraWxscywgcHJvamVjdHMsIGFuZCBjYW4gZXZlbiBmZXRjaCBoaXMgbGF0ZXN0IEdpdEh1YiBzdGF0cy4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBrbm93P1wiO1xuXG4gICAgLy8gR2xvYmFsIHN0YXRlIChsaWtlIGhhbWJ1cmdlci5qcyBzaW1wbGUgc3RhdGUpXG4gICAgbGV0IGlzT3BlbiA9IGZhbHNlO1xuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9ucyAobGlrZSBoYW1idXJnZXIuanMgaGVscGVyIGZ1bmN0aW9ucylcbiAgICBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHRcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyhjb250ZW50XFwvW15cXHNdK1xcLmh0bWwpL2csICc8YSBocmVmPVwiJDFcIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cImNoYXRib3QtbGlua1wiPiQxPC9hPicpXG4gICAgICAgICAgICAucmVwbGFjZSgvXuKAoiAvZ20sICc8c3BhbiBjbGFzcz1cImJ1bGxldFwiPuKAojwvc3Bhbj4gJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtbWVzc2FnZXMnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBtZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUbyh7XG4gICAgICAgICAgICAgICAgdG9wOiBtZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRNZXNzYWdlKGNvbnRlbnQsIHNlbmRlciwgaXNFcnJvciA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtbWVzc2FnZXMnKTtcbiAgICAgICAgaWYgKCFtZXNzYWdlc0NvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG1lc3NhZ2VFbGVtZW50LmNsYXNzTmFtZSA9IGBtZXNzYWdlICR7c2VuZGVyfWA7XG4gICAgICAgIGlmIChpc0Vycm9yKSBtZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSBmb3JtYXRNZXNzYWdlKGNvbnRlbnQpO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xuXG4gICAgICAgIG1lc3NhZ2VFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1jb250ZW50XCI+JHtmb3JtYXR0ZWRDb250ZW50fTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLXRpbWVcIj4ke3RpbWVzdGFtcH08L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBtZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlRWxlbWVudCk7XG4gICAgICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1R5cGluZ0luZGljYXRvcigpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1tZXNzYWdlcycpO1xuICAgICAgICBpZiAoIW1lc3NhZ2VzQ29udGFpbmVyKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCB0eXBpbmdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHR5cGluZ0VsZW1lbnQuY2xhc3NOYW1lID0gJ21lc3NhZ2UgYm90IHR5cGluZyc7XG4gICAgICAgIHR5cGluZ0VsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0eXBpbmctaW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcblxuICAgICAgICBtZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0eXBpbmdFbGVtZW50KTtcbiAgICAgICAgc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgcmV0dXJuIHR5cGluZ0VsZW1lbnQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlVHlwaW5nSW5kaWNhdG9yKHR5cGluZ0VsZW1lbnQpIHtcbiAgICAgICAgaWYgKHR5cGluZ0VsZW1lbnQgJiYgdHlwaW5nRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0eXBpbmdFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodHlwaW5nRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDaGF0Ym90KCkge1xuICAgICAgICBjb25zdCBjaGF0Ym90V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3Qtd2luZG93Jyk7XG5cbiAgICAgICAgaWYgKCFjaGF0Ym90V2luZG93KSByZXR1cm47XG5cbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgY2xvc2VDaGF0Ym90KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGF0Ym90V2luZG93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBpc09wZW4gPSB0cnVlO1xuXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym90LWlucHV0Jyk7XG4gICAgICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGlucHV0LmZvY3VzKCksIENIQVRCT1RfVUlfQ09ORklHLmZvY3VzRGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VDaGF0Ym90KCkge1xuICAgICAgICBjb25zdCBjaGF0Ym90V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3Qtd2luZG93Jyk7XG4gICAgICAgIGlmIChjaGF0Ym90V2luZG93KSB7XG4gICAgICAgICAgICBjaGF0Ym90V2luZG93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBpc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCFtZXNzYWdlLnRyaW0oKSkgcmV0dXJuO1xuXG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ3VzZXInKTtcbiAgICAgICAgY29uc3QgdHlwaW5nSW5kaWNhdG9yID0gc2hvd1R5cGluZ0luZGljYXRvcigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBBY2Nlc3MgcHJvY2Vzc01lc3NhZ2UgZnJvbSBnbG9iYWwgc2NvcGUgb3IgbW9kdWxlXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzTWVzc2FnZUZuID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnByb2Nlc3NNZXNzYWdlXG4gICAgICAgICAgICAgICAgPyB3aW5kb3cucHJvY2Vzc01lc3NhZ2VcbiAgICAgICAgICAgICAgICA6ICh0eXBlb2YgcHJvY2Vzc01lc3NhZ2UgIT09ICd1bmRlZmluZWQnID8gcHJvY2Vzc01lc3NhZ2UgOiBudWxsKTtcblxuICAgICAgICAgICAgaWYgKCFwcm9jZXNzTWVzc2FnZUZuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzTWVzc2FnZSBmdW5jdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvY2Vzc01lc3NhZ2VGbihtZXNzYWdlKTtcbiAgICAgICAgICAgIHJlbW92ZVR5cGluZ0luZGljYXRvcih0eXBpbmdJbmRpY2F0b3IpO1xuICAgICAgICAgICAgYWRkTWVzc2FnZShyZXNwb25zZSwgJ2JvdCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVtb3ZlVHlwaW5nSW5kaWNhdG9yKHR5cGluZ0luZGljYXRvcik7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgYWRkTWVzc2FnZSgnU29ycnksIEkgZW5jb3VudGVyZWQgYW4gZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uJywgJ2JvdCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhdGJvdENvbnRhaW5lcigpIHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENIQVRCT1RfVUlfQ09ORklHLmNvbnRhaW5lcklkKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmlkID0gQ0hBVEJPVF9VSV9DT05GSUcuY29udGFpbmVySWQ7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdHRhY2hFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtdG9nZ2xlJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtY2xvc2UnKTtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym90LWlucHV0LWZvcm0nKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1pbnB1dCcpO1xuXG4gICAgICAgIGlmICh0b2dnbGUpIHtcbiAgICAgICAgICAgIHRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNoYXRib3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNsb3NlQnRuKSB7XG4gICAgICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQ2hhdGJvdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gaW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3VibWl0JykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93V2VsY29tZU1lc3NhZ2UoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgYWRkTWVzc2FnZShXRUxDT01FX01FU1NBR0UsICdib3QnKTtcbiAgICAgICAgfSwgQ0hBVEJPVF9VSV9DT05GSUcud2VsY29tZURlbGF5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckNoYXQoKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtbWVzc2FnZXMnKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBtZXNzYWdlc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFjY2VzcyBjbGVhckhpc3RvcnkgZnJvbSBnbG9iYWwgc2NvcGUgb3IgbW9kdWxlXG4gICAgICAgIGNvbnN0IGNsZWFySGlzdG9yeUZuID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNsZWFySGlzdG9yeVxuICAgICAgICAgICAgPyB3aW5kb3cuY2xlYXJIaXN0b3J5XG4gICAgICAgICAgICA6ICh0eXBlb2YgY2xlYXJIaXN0b3J5ICE9PSAndW5kZWZpbmVkJyA/IGNsZWFySGlzdG9yeSA6IG51bGwpO1xuXG4gICAgICAgIGlmIChjbGVhckhpc3RvcnlGbikge1xuICAgICAgICAgICAgY2xlYXJIaXN0b3J5Rm4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dXZWxjb21lTWVzc2FnZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dG9Jbml0aWFsaXplQ2hhdGJvdCgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gY3JlYXRlQ2hhdGJvdENvbnRhaW5lcigpO1xuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gQ0hBVEJPVF9IVE1MO1xuICAgICAgICBhdHRhY2hFdmVudExpc3RlbmVycygpO1xuICAgICAgICBzaG93V2VsY29tZU1lc3NhZ2UoKTtcbiAgICB9XG5cbiAgICAvLyBFeHBvcnQgZm9yIHRlc3RpbmcgKGxpa2UgaGFtYnVyZ2VyLmpzIGV4cG9ydHMpXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICAgICAgdG9nZ2xlQ2hhdGJvdCxcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlLFxuICAgICAgICAgICAgY2xlYXJDaGF0LFxuICAgICAgICAgICAgYWRkTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGF2YWlsYWJsZSBnbG9iYWxseSAobGlrZSBoYW1idXJnZXIuanMpXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdpbmRvdy50b2dnbGVDaGF0Ym90ID0gdG9nZ2xlQ2hhdGJvdDtcbiAgICAgICAgd2luZG93LmNsZWFyQ2hhdCA9IGNsZWFyQ2hhdDtcbiAgICAgICAgd2luZG93LnNlbmRNZXNzYWdlID0gc2VuZE1lc3NhZ2U7XG4gICAgICAgIHdpbmRvdy5hZGRNZXNzYWdlID0gYWRkTWVzc2FnZTtcbiAgICB9XG5cbiAgICAvLyBBdXRvLWluaXRpYWxpemUgKGxpa2UgbmF2aWdhdGlvbi5qcylcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXV0b0luaXRpYWxpemVDaGF0Ym90KTtcbn0pKCk7ICIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDIyNyk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDY4ODIpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2OTQpO1xuIl0sIm5hbWVzIjpbIkNIQVRCT1RfQ09ORklHIiwiZ2l0aHViVXNlcm5hbWUiLCJvcGVuYWlNb2RlbCIsIm1heFRva2VucyIsInRlbXBlcmF0dXJlIiwiZ2l0aHViS2V5d29yZHMiLCJDaGF0Ym90IiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiaHRtbENvbnRlbnQiLCJzeXN0ZW1Qcm9tcHQiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwibG9hZENvbnRlbnRJbmRleCIsImluZGV4UmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwibG9hZFNpbmdsZUNvbnRlbnRGaWxlIiwiZmlsZW5hbWUiLCJyZXNwb25zZSIsImNvbnRlbnQiLCJ0ZXh0IiwiZmlsZVR5cGUiLCJlbmRzV2l0aCIsImxvYWRBbGxDb250ZW50RmlsZXMiLCJjb250ZW50RmlsZXMiLCJjb21iaW5lZENvbnRlbnQiLCJsb2FkQ29udGVudEZpbGVzIiwiY3JlYXRlU3lzdGVtUHJvbXB0IiwiY29udGVudERhdGEiLCJnaXRodWJDb250ZXh0IiwibWVzc2FnZVJlcXVpcmVzR2l0aHViU3RhdHMiLCJtZXNzYWdlIiwibG93ZXJNZXNzYWdlIiwidG9Mb3dlckNhc2UiLCJzb21lIiwia2V5d29yZCIsImluY2x1ZGVzIiwiZmV0Y2hHaXRIdWJTdGF0cyIsInN0YXRzIiwicHVibGljX3JlcG9zIiwiZm9sbG93ZXJzIiwiZm9sbG93aW5nIiwiY3JlYXRlZF9hdCIsImJpbyIsImxvY2F0aW9uIiwiY29tcGFueSIsImVycm9yIiwiY29uc29sZSIsImZvcm1hdEdpdGh1YlN0YXRzRm9yQ29udGV4dCIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImluaXRpYWxpemUiLCJhZGRNZXNzYWdlVG9IaXN0b3J5Iiwicm9sZSIsInRpbWVzdGFtcCIsInB1c2giLCJnZXRHaXRodWJDb250ZXh0SWZOZWVkZWQiLCJjcmVhdGVFcnJvclJlc3BvbnNlIiwicHJvY2Vzc01lc3NhZ2UiLCJnZW5lcmF0ZUFJUmVzcG9uc2UiLCJlcnJvclJlc3BvbnNlIiwiYnVpbGRNZXNzYWdlc0ZvckFJIiwic2xpY2UiLCJjYWxsT3BlbkFJQVBJIiwibWVzc2FnZXMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJlcnJvckRhdGEiLCJjYXRjaCIsImNob2ljZXMiLCJjbGVhckhpc3RvcnkiLCJnZXRIaXN0b3J5IiwiY2hhdGJvdEluc3RhbmNlIiwiZ2V0Q2hhdGJvdEluc3RhbmNlIiwiYXN5bmMiLCJpbml0aWFsaXplQ2hhdGJvdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImFwcGVuZENoaWxkIiwibG9nIiwiQ0hBVEJPVF9VSV9DT05GSUciLCJpc09wZW4iLCJzY3JvbGxUb0JvdHRvbSIsIm1lc3NhZ2VzQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvIiwidG9wIiwic2Nyb2xsSGVpZ2h0IiwiYmVoYXZpb3IiLCJhZGRNZXNzYWdlIiwic2VuZGVyIiwiaXNFcnJvciIsIm1lc3NhZ2VFbGVtZW50IiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwiZm9ybWF0dGVkQ29udGVudCIsInJlcGxhY2UiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwiaW5uZXJIVE1MIiwicmVtb3ZlVHlwaW5nSW5kaWNhdG9yIiwidHlwaW5nRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInRvZ2dsZUNoYXRib3QiLCJjaGF0Ym90V2luZG93IiwiY2xvc2VDaGF0Ym90Iiwic3R5bGUiLCJkaXNwbGF5IiwiaW5wdXQiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJzZW5kTWVzc2FnZSIsInRyaW0iLCJ0eXBpbmdJbmRpY2F0b3IiLCJzaG93VHlwaW5nSW5kaWNhdG9yIiwicHJvY2Vzc01lc3NhZ2VGbiIsInNob3dXZWxjb21lTWVzc2FnZSIsImNsZWFyQ2hhdCIsImNsZWFySGlzdG9yeUZuIiwiY3JlYXRlQ2hhdGJvdENvbnRhaW5lciIsInRvZ2dsZSIsImNsb3NlQnRuIiwiZm9ybSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwia2V5Iiwic2hpZnRLZXkiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJhdHRhY2hFdmVudExpc3RlbmVycyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==