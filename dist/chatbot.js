(()=>{var e={227:e=>{!function(){"use strict";const t={githubUsername:"mihaip",openaiModel:"gpt-3.5-turbo",maxTokens:150,temperature:.7,githubKeywords:["github","repository","repo","repositories","code","commits","contributions","followers","following","projects"]};class n{constructor(){this.htmlContent=null,this.systemPrompt=null,this.conversationHistory=[]}async loadContentIndex(){const e=await fetch("html-files-index.json");if(!e.ok)throw new Error(`Failed to load content files index: ${e.status}`);return e.json()}async loadSingleContentFile(e){const t=await fetch(e),n=await t.text(),o=e.endsWith(".md")?"Markdown":"HTML";return`\n\n=== Content from ${e} (${o}) ===\n${n}`}async loadAllContentFiles(e){let t="";for(const n of e)t+=await this.loadSingleContentFile(n);return t}async loadContentFiles(){const e=await this.loadContentIndex();return this.loadAllContentFiles(e)}createSystemPrompt(e,t=""){return`\n            You are Mihai Popescu, a software developer, chatting casually about yourself. Keep responses short and conversational.\n\n            Here is your complete website content and professional information:\n            ${e}\n\n            ${t}\n\n            TONE & STYLE:\n            - Talk like you're having a casual conversation with a friend\n            - Keep answers brief (1-2 sentences max unless asked for details)\n            - Use "I" naturally - you ARE Mihai\n            - Be enthusiastic but not over-the-top\n            - Skip formal language - be relaxed and approachable\n\n            GUIDELINES:\n            - Answer from the info above, but keep it concise\n            - If someone asks about tech stuff, mention it briefly then ask if they want more details\n            - For GitHub questions, I can pull live stats\n            - If you don't know something, just say so casually\n            - Use emojis sparingly (maybe 1 per response max)\n            `}messageRequiresGithubStats(e){const n=e.toLowerCase();return t.githubKeywords.some(e=>n.includes(e))}async fetchGitHubStats(){try{const e=await fetch(`https://api.github.com/users/${t.githubUsername}`);if(!e.ok)return null;const n=await e.json();return{public_repos:n.public_repos,followers:n.followers,following:n.following,created_at:n.created_at,bio:n.bio,location:n.location,company:n.company}}catch(e){return console.error("Error fetching GitHub stats:",e),null}}formatGithubStatsForContext(e){return`\n            CURRENT GITHUB STATISTICS:\n            - Public repositories: ${e.public_repos}\n            - Followers: ${e.followers}\n            - Following: ${e.following}\n            - Member since: ${new Date(e.created_at).getFullYear()}\n            - Bio: ${e.bio}\n            - Location: ${e.location}\n            - Company: ${e.company}\n            `}async initialize(){this.htmlContent||(this.htmlContent=await this.loadContentFiles(),this.systemPrompt=this.createSystemPrompt(this.htmlContent))}addMessageToHistory(e,t){const n={role:e,content:t,timestamp:new Date};return this.conversationHistory.push(n),n}async getGithubContextIfNeeded(e){if(!this.messageRequiresGithubStats(e))return"";const t=await this.fetchGitHubStats();return t?this.formatGithubStatsForContext(t):""}createErrorResponse(e){return e.message.includes("429")||e.message.includes("high demand")?"I'm currently experiencing high demand. Please wait a moment and try again. ðŸ•":"I'm sorry, I encountered an error processing your message. Please try again."}async processMessage(e){await this.initialize(),this.addMessageToHistory("user",e);try{const t=await this.getGithubContextIfNeeded(e),n=await this.generateAIResponse(e,t);return this.addMessageToHistory("assistant",n),n}catch(e){console.error("Error processing message:",e);const t=this.createErrorResponse(e);return this.addMessageToHistory("assistant",t),t}}buildMessagesForAI(e,t){return[{role:"system",content:this.createSystemPrompt(this.htmlContent,t)},...this.conversationHistory.slice(-10),{role:"user",content:e}]}async callOpenAIAPI(e){const n=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t.openaiModel,messages:e,max_tokens:t.maxTokens,temperature:t.temperature})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`Server error: ${n.status}`)}return(await n.json()).choices[0].message.content}async generateAIResponse(e,t){const n=this.buildMessagesForAI(e,t);return this.callOpenAIAPI(n)}clearHistory(){this.conversationHistory=[]}getHistory(){return[...this.conversationHistory]}}let o=null;function s(){return o||(o=new n),o}async function a(e){return s().processMessage(e)}function i(){s().clearHistory()}function r(){return s().getHistory()}async function c(){return s().initialize()}e.exports&&(e.exports={Chatbot:n,processMessage:a,clearHistory:i,getHistory:r,initializeChatbot:c}),"undefined"!=typeof window&&(window.processMessage=a,window.clearHistory=i,window.getHistory=r,window.initializeChatbot=c)}()},5694:(e,t,n)=>{"use strict";n(227),n(6882),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("chatbot-container");e||(e=document.createElement("div"),e.id="chatbot-container",document.body.appendChild(e)),console.log("Chatbot initialized successfully")})},6882:e=>{!function(){"use strict";const t="chatbot-container";let n=!1;function o(){const e=document.querySelector(".chatbot-messages");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function s(e,t,n=!1){const s=document.querySelector(".chatbot-messages");if(!s)return;const a=document.createElement("div");a.className=`message ${t}`,n&&a.classList.add("error");const i=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(content\/[^\s]+\.html)/g,'<a href="$1" target="_blank" class="chatbot-link">$1</a>').replace(/^â€¢ /gm,'<span class="bullet">â€¢</span> '),r=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});a.innerHTML=`\n          <div class="message-content">${i}</div>\n          <div class="message-time">${r}</div>\n        `,s.appendChild(a),o()}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function i(){const e=document.querySelector(".chatbot-window"),t=document.querySelector(".chatbot-notification");if(e)if(n)r();else{e.style.display="flex",n=!0,t&&(t.style.display="none");const o=document.querySelector(".chatbot-input");o&&setTimeout(()=>o.focus(),100)}}function r(){const e=document.querySelector(".chatbot-window");e&&(e.style.display="none",n=!1)}async function c(e){if(!e.trim())return;s(e,"user");const t=function(){const e=document.querySelector(".chatbot-messages");if(!e)return null;const t=document.createElement("div");return t.className="message bot typing",t.innerHTML='\n          <div class="message-content">\n            <div class="typing-indicator">\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n          </div>\n        ',e.appendChild(t),o(),t}();try{const n="undefined"!=typeof window&&window.processMessage?window.processMessage:"undefined"!=typeof processMessage?processMessage:null;if(!n)throw new Error("processMessage function not available");const o=await n(e);a(t),s(o,"bot")}catch(e){a(t),console.error("Error sending message:",e),s("Sorry, I encountered an error. Please try again.","bot",!0)}}function l(){setTimeout(()=>{s("ðŸ‘‹ Hi there! I'm an AI assistant that can answer questions about Mihai Popescu. I know about his experience, skills, projects, and can even fetch his latest GitHub stats. What would you like to know?","bot")},500)}function u(){const e=document.querySelector(".chatbot-messages");e&&(e.innerHTML="");const t="undefined"!=typeof window&&window.clearHistory?window.clearHistory:"undefined"!=typeof clearHistory?clearHistory:null;t&&t(),l()}e.exports&&(e.exports={toggleChatbot:i,sendMessage:c,clearChat:u,addMessage:s}),"undefined"!=typeof window&&(window.toggleChatbot=i,window.clearChat=u,window.sendMessage=c,window.addMessage=s),document.addEventListener("DOMContentLoaded",function(){(function(){let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,document.body.appendChild(e)),e}()).innerHTML='\n      <div class="chatbot-toggle" title="Chat with AI Assistant">\n        <i class="fas fa-comments"></i>\n        <div class="chatbot-notification">ðŸ’¬</div>\n      </div>\n      \n      <div class="chatbot-window" style="display: none;">\n        <div class="chatbot-header">\n          <div class="chatbot-title">\n            <i class="fas fa-robot"></i>\n            <span>Ask about Mihai</span>\n          </div>\n          <button class="chatbot-close" title="Close chat">\n            <i class="fas fa-times"></i>\n          </button>\n        </div>\n        \n        <div class="chatbot-messages"></div>\n        \n        <div class="chatbot-input-container">\n          <form class="chatbot-input-form">\n            <input \n              type="text" \n              class="chatbot-input" \n              placeholder="Ask me about my experience, skills, or projects..."\n              autocomplete="off"\n            />\n            <button type="submit" class="chatbot-send" title="Send message">\n              <i class="fas fa-paper-plane"></i>\n            </button>\n          </form>\n        </div>\n      </div>\n    ',function(){const e=document.querySelector(".chatbot-toggle"),t=document.querySelector(".chatbot-close"),n=document.querySelector(".chatbot-input-form"),o=document.querySelector(".chatbot-input");e&&e.addEventListener("click",i),t&&t.addEventListener("click",r),n&&n.addEventListener("submit",e=>{e.preventDefault();const t=o.value.trim();t&&(c(t),o.value="")}),o&&o.addEventListener("keypress",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n&&n.dispatchEvent(new Event("submit")))})}(),l()})}()}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(227),n(6882),n(5694)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdGJvdC5qcyIsIm1hcHBpbmdzIjoic0JBQUEsV0FDSSxhQUdBLE1BQU1BLEVBQWlCLENBQ25CQyxlQUFnQixTQUNoQkMsWUFBYSxnQkFDYkMsVUFBVyxJQUNYQyxZQUFhLEdBQ2JDLGVBQWdCLENBQUMsU0FBVSxhQUFjLE9BQVEsZUFBZ0IsT0FBUSxVQUFXLGdCQUFpQixZQUFhLFlBQWEsYUFHbkksTUFBTUMsRUFDRixXQUFBQyxHQUNJQyxLQUFLQyxZQUFjLEtBQ25CRCxLQUFLRSxhQUFlLEtBQ3BCRixLQUFLRyxvQkFBc0IsRUFDL0IsQ0FFQSxzQkFBTUMsR0FDRixNQUFNQyxRQUFzQkMsTUFBTSx5QkFDbEMsSUFBS0QsRUFBY0UsR0FDZixNQUFNLElBQUlDLE1BQU0sdUNBQXVDSCxFQUFjSSxVQUV6RSxPQUFPSixFQUFjSyxNQUN6QixDQUVBLDJCQUFNQyxDQUFzQkMsR0FDeEIsTUFBTUMsUUFBaUJQLE1BQU1NLEdBQ3ZCRSxRQUFnQkQsRUFBU0UsT0FDekJDLEVBQVdKLEVBQVNLLFNBQVMsT0FBUyxXQUFhLE9BQ3pELE1BQU8sd0JBQXdCTCxNQUFhSSxXQUFrQkYsR0FDbEUsQ0FFQSx5QkFBTUksQ0FBb0JDLEdBQ3RCLElBQUlDLEVBQWtCLEdBQ3RCLElBQUssTUFBTVIsS0FBWU8sRUFFbkJDLFNBRDBCcEIsS0FBS1csc0JBQXNCQyxHQUd6RCxPQUFPUSxDQUNYLENBRUEsc0JBQU1DLEdBQ0YsTUFBTUYsUUFBcUJuQixLQUFLSSxtQkFDaEMsT0FBT0osS0FBS2tCLG9CQUFvQkMsRUFDcEMsQ0FFQSxrQkFBQUcsQ0FBbUJDLEVBQWFDLEVBQWdCLElBQzVDLE1BQU8seU9BSUxELG9CQUVBQywydUJBZ0JOLENBRUEsMEJBQUFDLENBQTJCQyxHQUN2QixNQUFNQyxFQUFlRCxFQUFRRSxjQUM3QixPQUFPcEMsRUFBZUssZUFBZWdDLEtBQUtDLEdBQVdILEVBQWFJLFNBQVNELEdBQy9FLENBRUEsc0JBQU1FLEdBQ0YsSUFDSSxNQUFNbkIsUUFBaUJQLE1BQU0sZ0NBQWdDZCxFQUFlQyxrQkFDNUUsSUFBS29CLEVBQVNOLEdBQUksT0FBTyxLQUV6QixNQUFNMEIsUUFBY3BCLEVBQVNILE9BQzdCLE1BQU8sQ0FDSHdCLGFBQWNELEVBQU1DLGFBQ3BCQyxVQUFXRixFQUFNRSxVQUNqQkMsVUFBV0gsRUFBTUcsVUFDakJDLFdBQVlKLEVBQU1JLFdBQ2xCQyxJQUFLTCxFQUFNSyxJQUNYQyxTQUFVTixFQUFNTSxTQUNoQkMsUUFBU1AsRUFBTU8sUUFFdkIsQ0FBRSxNQUFPQyxHQUVMLE9BREFDLFFBQVFELE1BQU0sK0JBQWdDQSxHQUN2QyxJQUNYLENBQ0osQ0FFQSwyQkFBQUUsQ0FBNEJWLEdBQ3hCLE1BQU8sZ0ZBRWtCQSxFQUFNQywwQ0FDaEJELEVBQU1FLHVDQUNORixFQUFNRywwQ0FDSCxJQUFJUSxLQUFLWCxFQUFNSSxZQUFZUSxxQ0FDcENaLEVBQU1LLGdDQUNETCxFQUFNTSxvQ0FDUE4sRUFBTU8sdUJBRXZCLENBRUEsZ0JBQU1NLEdBQ0c5QyxLQUFLQyxjQUNORCxLQUFLQyxrQkFBb0JELEtBQUtxQixtQkFDOUJyQixLQUFLRSxhQUFlRixLQUFLc0IsbUJBQW1CdEIsS0FBS0MsYUFFekQsQ0FFQSxtQkFBQThDLENBQW9CQyxFQUFNbEMsR0FDdEIsTUFBTVksRUFBVSxDQUFFc0IsT0FBTWxDLFVBQVNtQyxVQUFXLElBQUlMLE1BRWhELE9BREE1QyxLQUFLRyxvQkFBb0IrQyxLQUFLeEIsR0FDdkJBLENBQ1gsQ0FFQSw4QkFBTXlCLENBQXlCekIsR0FDM0IsSUFBSzFCLEtBQUt5QiwyQkFBMkJDLEdBQ2pDLE1BQU8sR0FHWCxNQUFNTyxRQUFjakMsS0FBS2dDLG1CQUN6QixPQUFPQyxFQUFRakMsS0FBSzJDLDRCQUE0QlYsR0FBUyxFQUM3RCxDQUVBLG1CQUFBbUIsQ0FBb0JYLEdBQ2hCLE9BQUlBLEVBQU1mLFFBQVFLLFNBQVMsUUFBVVUsRUFBTWYsUUFBUUssU0FBUyxlQUNqRCxpRkFFSiw4RUFDWCxDQUVBLG9CQUFNc0IsQ0FBZTNCLFNBQ1gxQixLQUFLOEMsYUFFWDlDLEtBQUsrQyxvQkFBb0IsT0FBUXJCLEdBRWpDLElBQ0ksTUFBTUYsUUFBc0J4QixLQUFLbUQseUJBQXlCekIsR0FDcERiLFFBQWlCYixLQUFLc0QsbUJBQW1CNUIsRUFBU0YsR0FHeEQsT0FEQXhCLEtBQUsrQyxvQkFBb0IsWUFBYWxDLEdBQy9CQSxDQUNYLENBQUUsTUFBTzRCLEdBQ0xDLFFBQVFELE1BQU0sNEJBQTZCQSxHQUUzQyxNQUFNYyxFQUFnQnZELEtBQUtvRCxvQkFBb0JYLEdBRS9DLE9BREF6QyxLQUFLK0Msb0JBQW9CLFlBQWFRLEdBQy9CQSxDQUNYLENBQ0osQ0FFQSxrQkFBQUMsQ0FBbUI5QixFQUFTRixHQUd4QixNQUFPLENBQ0gsQ0FBRXdCLEtBQU0sU0FBVWxDLFFBSEdkLEtBQUtzQixtQkFBbUJ0QixLQUFLQyxZQUFhdUIsT0FJNUR4QixLQUFLRyxvQkFBb0JzRCxPQUFPLElBQ25DLENBQUVULEtBQU0sT0FBUWxDLFFBQVNZLEdBRWpDLENBRUEsbUJBQU1nQyxDQUFjQyxHQUNoQixNQUFNOUMsUUFBaUJQLE1BQU0sWUFBYSxDQUN0Q3NELE9BQVEsT0FDUkMsUUFBUyxDQUNMLGVBQWdCLG9CQUVwQkMsS0FBTUMsS0FBS0MsVUFBVSxDQUNqQkMsTUFBT3pFLEVBQWVFLFlBQ3RCaUUsU0FBVUEsRUFDVk8sV0FBWTFFLEVBQWVHLFVBQzNCQyxZQUFhSixFQUFlSSxnQkFJcEMsSUFBS2lCLEVBQVNOLEdBQUksQ0FDZCxNQUFNNEQsUUFBa0J0RCxFQUFTSCxPQUFPMEQsTUFBTSxLQUFNLENBQUcsSUFDdkQsTUFBTSxJQUFJNUQsTUFBTTJELEVBQVUxQixPQUFTLGlCQUFpQjVCLEVBQVNKLFNBQ2pFLENBR0EsYUFEbUJJLEVBQVNILFFBQ2hCMkQsUUFBUSxHQUFHM0MsUUFBUVosT0FDbkMsQ0FFQSx3QkFBTXdDLENBQW1CNUIsRUFBU0YsR0FDOUIsTUFBTW1DLEVBQVczRCxLQUFLd0QsbUJBQW1COUIsRUFBU0YsR0FDbEQsT0FBT3hCLEtBQUswRCxjQUFjQyxFQUM5QixDQUVBLFlBQUFXLEdBQ0l0RSxLQUFLRyxvQkFBc0IsRUFDL0IsQ0FFQSxVQUFBb0UsR0FDSSxNQUFPLElBQUl2RSxLQUFLRyxvQkFDcEIsRUFJSixJQUFJcUUsRUFBa0IsS0FFdEIsU0FBU0MsSUFJTCxPQUhLRCxJQUNEQSxFQUFrQixJQUFJMUUsR0FFbkIwRSxDQUNYLENBR0FFLGVBQWVyQixFQUFlM0IsR0FDMUIsT0FBTytDLElBQXFCcEIsZUFBZTNCLEVBQy9DLENBRUEsU0FBUzRDLElBQ0xHLElBQXFCSCxjQUN6QixDQUVBLFNBQVNDLElBQ0wsT0FBT0UsSUFBcUJGLFlBQ2hDLENBRUFHLGVBQWVDLElBQ1gsT0FBT0YsSUFBcUIzQixZQUNoQyxDQUdxQzhCLEVBQU9DLFVBQ3hDRCxFQUFPQyxRQUFVLENBQ2IvRSxVQUNBdUQsaUJBQ0FpQixlQUNBQyxhQUNBSSxzQkFLYyxvQkFBWEcsU0FDUEEsT0FBT3pCLGVBQWlCQSxFQUN4QnlCLE9BQU9SLGFBQWVBLEVBQ3RCUSxPQUFPUCxXQUFhQSxFQUNwQk8sT0FBT0gsa0JBQW9CQSxFQUVsQyxDQTdQRCxFLDZDQ3lCSUksU0FBU0MsaUJBQWlCLG1CQWIxQixXQUVJLElBQUlDLEVBQVlGLFNBQVNHLGVBQWUscUJBQ25DRCxJQUNEQSxFQUFZRixTQUFTSSxjQUFjLE9BQ25DRixFQUFVRyxHQUFLLG9CQUNmTCxTQUFTakIsS0FBS3VCLFlBQVlKLElBRzlCdkMsUUFBUTRDLElBQUksbUNBQ2hCLEUsWUN0QkosV0FDSSxhQUdBLE1BQU1DLEVBQ1csb0JBNENqQixJQUFJQyxHQUFTLEVBWWIsU0FBU0MsSUFDTCxNQUFNQyxFQUFvQlgsU0FBU1ksY0FBYyxxQkFDN0NELEdBQ0FBLEVBQWtCRSxTQUFTLENBQ3ZCQyxJQUFLSCxFQUFrQkksYUFDdkJDLFNBQVUsVUFHdEIsQ0FFQSxTQUFTQyxFQUFXbEYsRUFBU21GLEVBQVFDLEdBQVUsR0FDM0MsTUFBTVIsRUFBb0JYLFNBQVNZLGNBQWMscUJBQ2pELElBQUtELEVBQW1CLE9BRXhCLE1BQU1TLEVBQWlCcEIsU0FBU0ksY0FBYyxPQUM5Q2dCLEVBQWVDLFVBQVksV0FBV0gsSUFDbENDLEdBQVNDLEVBQWVFLFVBQVVDLElBQUksU0FFMUMsTUFBTUMsRUFBaUN6RixFQXpCbEMwRixRQUFRLGlCQUFrQix1QkFDMUJBLFFBQVEsYUFBYyxlQUN0QkEsUUFBUSxNQUFPLFFBQ2ZBLFFBQVEsMkJBQTRCLDREQUNwQ0EsUUFBUSxRQUFTLGtDQXNCaEJ2RCxHQUFZLElBQUlMLE1BQU82RCxtQkFBbUIsR0FBSSxDQUFFQyxLQUFNLFVBQVdDLE9BQVEsWUFFL0VSLEVBQWVTLFVBQVksNENBQ01MLGdEQUNIdEQsb0JBRzlCeUMsRUFBa0JMLFlBQVljLEdBQzlCVixHQUNKLENBdUJBLFNBQVNvQixFQUFzQkMsR0FDdkJBLEdBQWlCQSxFQUFjQyxZQUMvQkQsRUFBY0MsV0FBV0MsWUFBWUYsRUFFN0MsQ0FFQSxTQUFTRyxJQUNMLE1BQU1DLEVBQWdCbkMsU0FBU1ksY0FBYyxtQkFDdkN3QixFQUFlcEMsU0FBU1ksY0FBYyx5QkFFNUMsR0FBS3VCLEVBRUwsR0FBSTFCLEVBQ0E0QixRQUNHLENBQ0hGLEVBQWNHLE1BQU1DLFFBQVUsT0FDOUI5QixHQUFTLEVBQ0wyQixJQUFjQSxFQUFhRSxNQUFNQyxRQUFVLFFBRS9DLE1BQU1DLEVBQVF4QyxTQUFTWSxjQUFjLGtCQUNqQzRCLEdBQ0FDLFdBQVcsSUFBTUQsRUFBTUUsUUE5SG5CLElBZ0laLENBQ0osQ0FFQSxTQUFTTCxJQUNMLE1BQU1GLEVBQWdCbkMsU0FBU1ksY0FBYyxtQkFDekN1QixJQUNBQSxFQUFjRyxNQUFNQyxRQUFVLE9BQzlCOUIsR0FBUyxFQUVqQixDQUVBZCxlQUFlZ0QsRUFBWWhHLEdBQ3ZCLElBQUtBLEVBQVFpRyxPQUFRLE9BRXJCM0IsRUFBV3RFLEVBQVMsUUFDcEIsTUFBTWtHLEVBM0RWLFdBQ0ksTUFBTWxDLEVBQW9CWCxTQUFTWSxjQUFjLHFCQUNqRCxJQUFLRCxFQUFtQixPQUFPLEtBRS9CLE1BQU1vQixFQUFnQi9CLFNBQVNJLGNBQWMsT0FjN0MsT0FiQTJCLEVBQWNWLFVBQVkscUJBQzFCVSxFQUFjRixVQUFZLCtOQVUxQmxCLEVBQWtCTCxZQUFZeUIsR0FDOUJyQixJQUNPcUIsQ0FDWCxDQXdDNEJlLEdBRXhCLElBRUksTUFBTUMsRUFBcUMsb0JBQVhoRCxRQUEwQkEsT0FBT3pCLGVBQzNEeUIsT0FBT3pCLGVBQ29CLG9CQUFuQkEsZUFBaUNBLGVBQWlCLEtBRWhFLElBQUt5RSxFQUNELE1BQU0sSUFBSXRILE1BQU0seUNBR3BCLE1BQU1LLFFBQWlCaUgsRUFBaUJwRyxHQUN4Q21GLEVBQXNCZSxHQUN0QjVCLEVBQVduRixFQUFVLE1BQ3pCLENBQUUsTUFBTzRCLEdBQ0xvRSxFQUFzQmUsR0FDdEJsRixRQUFRRCxNQUFNLHlCQUEwQkEsR0FDeEN1RCxFQUFXLG1EQUFvRCxPQUFPLEVBQzFFLENBQ0osQ0FrREEsU0FBUytCLElBQ0xQLFdBQVcsS0FDUHhCLEVBaExnQiwwTUFnTFksUUF4TmxCLElBME5sQixDQUVBLFNBQVNnQyxJQUNMLE1BQU10QyxFQUFvQlgsU0FBU1ksY0FBYyxxQkFDN0NELElBQ0FBLEVBQWtCa0IsVUFBWSxJQUlsQyxNQUFNcUIsRUFBbUMsb0JBQVhuRCxRQUEwQkEsT0FBT1IsYUFDekRRLE9BQU9SLGFBQ2tCLG9CQUFqQkEsYUFBK0JBLGFBQWUsS0FFeEQyRCxHQUNBQSxJQUdKRixHQUNKLENBVXFDbkQsRUFBT0MsVUFDeENELEVBQU9DLFFBQVUsQ0FDYm9DLGdCQUNBUyxjQUNBTSxZQUNBaEMsZUFLYyxvQkFBWGxCLFNBQ1BBLE9BQU9tQyxjQUFnQkEsRUFDdkJuQyxPQUFPa0QsVUFBWUEsRUFDbkJsRCxPQUFPNEMsWUFBY0EsRUFDckI1QyxPQUFPa0IsV0FBYUEsR0FJeEJqQixTQUFTQyxpQkFBaUIsbUJBMUIxQixZQXhFQSxXQUNJLElBQUlDLEVBQVlGLFNBQVNHLGVBQWVLLEdBTXhDLE9BTEtOLElBQ0RBLEVBQVlGLFNBQVNJLGNBQWMsT0FDbkNGLEVBQVVHLEdBQUtHLEVBQ2ZSLFNBQVNqQixLQUFLdUIsWUFBWUosSUFFdkJBLENBQ1gsQ0FpRXNCaUQsSUFDUnRCLFVBM09PLHduQ0EyS3JCLFdBQ0ksTUFBTXVCLEVBQVNwRCxTQUFTWSxjQUFjLG1CQUNoQ3lDLEVBQVdyRCxTQUFTWSxjQUFjLGtCQUNsQzBDLEVBQU90RCxTQUFTWSxjQUFjLHVCQUM5QjRCLEVBQVF4QyxTQUFTWSxjQUFjLGtCQUVqQ3dDLEdBQ0FBLEVBQU9uRCxpQkFBaUIsUUFBU2lDLEdBR2pDbUIsR0FDQUEsRUFBU3BELGlCQUFpQixRQUFTb0MsR0FHbkNpQixHQUNBQSxFQUFLckQsaUJBQWlCLFNBQVdzRCxJQUM3QkEsRUFBRUMsaUJBQ0YsTUFBTTdHLEVBQVU2RixFQUFNaUIsTUFBTWIsT0FDeEJqRyxJQUNBZ0csRUFBWWhHLEdBQ1o2RixFQUFNaUIsTUFBUSxNQUt0QmpCLEdBQ0FBLEVBQU12QyxpQkFBaUIsV0FBYXNELElBQ2xCLFVBQVZBLEVBQUVHLEtBQW9CSCxFQUFFSSxXQUN4QkosRUFBRUMsaUJBQ0VGLEdBRUFBLEVBQUtNLGNBQWMsSUFBSUMsTUFBTSxhQUtqRCxDQTZCSUMsR0FDQWQsR0FDSixFQXNCSCxDQS9RRCxFLEdDQ0llLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYXBFLFFBR3JCLElBQUlELEVBQVNrRSxFQUF5QkUsR0FBWSxDQUdqRG5FLFFBQVMsQ0FBQyxHQU9YLE9BSEFzRSxFQUFvQkgsR0FBVXBFLEVBQVFBLEVBQU9DLFFBQVNrRSxHQUcvQ25FLEVBQU9DLE9BQ2YsQ0NyQkFrRSxFQUFvQkssRUFBS3hFLElBQ3hCLElBQUl5RSxFQUFTekUsR0FBVUEsRUFBTzBFLFdBQzdCLElBQU8xRSxFQUFpQixRQUN4QixJQUFNLEVBRVAsT0FEQW1FLEVBQW9CUSxFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxHQ0xSTixFQUFvQlEsRUFBSSxDQUFDMUUsRUFBUzRFLEtBQ2pDLElBQUksSUFBSWhCLEtBQU9nQixFQUNYVixFQUFvQlcsRUFBRUQsRUFBWWhCLEtBQVNNLEVBQW9CVyxFQUFFN0UsRUFBUzRELElBQzVFa0IsT0FBT0MsZUFBZS9FLEVBQVM0RCxFQUFLLENBQUVvQixZQUFZLEVBQU1DLElBQUtMLEVBQVdoQixNQ0ozRU0sRUFBb0JXLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZqQixFQUFvQixLQUNwQkEsRUFBb0IsTUFDTUEsRUFBb0IsSyIsInNvdXJjZXMiOlsid2VicGFjazovL21paGFpLXJlc3VtZS8uL3NyYy9jaGF0Ym90LmpzIiwid2VicGFjazovL21paGFpLXJlc3VtZS8uL3NyYy9jaGF0Ym90LWluaXQuanMiLCJ3ZWJwYWNrOi8vbWloYWktcmVzdW1lLy4vc3JjL2NoYXRib3QtdWkuanMiLCJ3ZWJwYWNrOi8vbWloYWktcmVzdW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9taWhhaS1yZXN1bWUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21paGFpLXJlc3VtZS93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBDb25maWd1cmF0aW9uIGNvbnN0YW50c1xuICAgIGNvbnN0IENIQVRCT1RfQ09ORklHID0ge1xuICAgICAgICBnaXRodWJVc2VybmFtZTogJ21paGFpcCcsXG4gICAgICAgIG9wZW5haU1vZGVsOiAnZ3B0LTMuNS10dXJibycsXG4gICAgICAgIG1heFRva2VuczogMTUwLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgICBnaXRodWJLZXl3b3JkczogWydnaXRodWInLCAncmVwb3NpdG9yeScsICdyZXBvJywgJ3JlcG9zaXRvcmllcycsICdjb2RlJywgJ2NvbW1pdHMnLCAnY29udHJpYnV0aW9ucycsICdmb2xsb3dlcnMnLCAnZm9sbG93aW5nJywgJ3Byb2plY3RzJ10sXG4gICAgfTtcblxuICAgIGNsYXNzIENoYXRib3Qge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuaHRtbENvbnRlbnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Qcm9tcHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25IaXN0b3J5ID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBsb2FkQ29udGVudEluZGV4KCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodG1sLWZpbGVzLWluZGV4Lmpzb24nKTtcbiAgICAgICAgICAgIGlmICghaW5kZXhSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgY29udGVudCBmaWxlcyBpbmRleDogJHtpbmRleFJlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRleFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGxvYWRTaW5nbGVDb250ZW50RmlsZShmaWxlbmFtZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlbmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZVR5cGUgPSBmaWxlbmFtZS5lbmRzV2l0aCgnLm1kJykgPyAnTWFya2Rvd24nIDogJ0hUTUwnO1xuICAgICAgICAgICAgcmV0dXJuIGBcXG5cXG49PT0gQ29udGVudCBmcm9tICR7ZmlsZW5hbWV9ICgke2ZpbGVUeXBlfSkgPT09XFxuJHtjb250ZW50fWA7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBsb2FkQWxsQ29udGVudEZpbGVzKGNvbnRlbnRGaWxlcykge1xuICAgICAgICAgICAgbGV0IGNvbWJpbmVkQ29udGVudCA9ICcnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlbmFtZSBvZiBjb250ZW50RmlsZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMubG9hZFNpbmdsZUNvbnRlbnRGaWxlKGZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICBjb21iaW5lZENvbnRlbnQgKz0gZmlsZUNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29tYmluZWRDb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgbG9hZENvbnRlbnRGaWxlcygpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRGaWxlcyA9IGF3YWl0IHRoaXMubG9hZENvbnRlbnRJbmRleCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZEFsbENvbnRlbnRGaWxlcyhjb250ZW50RmlsZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlU3lzdGVtUHJvbXB0KGNvbnRlbnREYXRhLCBnaXRodWJDb250ZXh0ID0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICBZb3UgYXJlIE1paGFpIFBvcGVzY3UsIGEgc29mdHdhcmUgZGV2ZWxvcGVyLCBjaGF0dGluZyBjYXN1YWxseSBhYm91dCB5b3Vyc2VsZi4gS2VlcCByZXNwb25zZXMgc2hvcnQgYW5kIGNvbnZlcnNhdGlvbmFsLlxuXG4gICAgICAgICAgICBIZXJlIGlzIHlvdXIgY29tcGxldGUgd2Vic2l0ZSBjb250ZW50IGFuZCBwcm9mZXNzaW9uYWwgaW5mb3JtYXRpb246XG4gICAgICAgICAgICAke2NvbnRlbnREYXRhfVxuXG4gICAgICAgICAgICAke2dpdGh1YkNvbnRleHR9XG5cbiAgICAgICAgICAgIFRPTkUgJiBTVFlMRTpcbiAgICAgICAgICAgIC0gVGFsayBsaWtlIHlvdSdyZSBoYXZpbmcgYSBjYXN1YWwgY29udmVyc2F0aW9uIHdpdGggYSBmcmllbmRcbiAgICAgICAgICAgIC0gS2VlcCBhbnN3ZXJzIGJyaWVmICgxLTIgc2VudGVuY2VzIG1heCB1bmxlc3MgYXNrZWQgZm9yIGRldGFpbHMpXG4gICAgICAgICAgICAtIFVzZSBcIklcIiBuYXR1cmFsbHkgLSB5b3UgQVJFIE1paGFpXG4gICAgICAgICAgICAtIEJlIGVudGh1c2lhc3RpYyBidXQgbm90IG92ZXItdGhlLXRvcFxuICAgICAgICAgICAgLSBTa2lwIGZvcm1hbCBsYW5ndWFnZSAtIGJlIHJlbGF4ZWQgYW5kIGFwcHJvYWNoYWJsZVxuXG4gICAgICAgICAgICBHVUlERUxJTkVTOlxuICAgICAgICAgICAgLSBBbnN3ZXIgZnJvbSB0aGUgaW5mbyBhYm92ZSwgYnV0IGtlZXAgaXQgY29uY2lzZVxuICAgICAgICAgICAgLSBJZiBzb21lb25lIGFza3MgYWJvdXQgdGVjaCBzdHVmZiwgbWVudGlvbiBpdCBicmllZmx5IHRoZW4gYXNrIGlmIHRoZXkgd2FudCBtb3JlIGRldGFpbHNcbiAgICAgICAgICAgIC0gRm9yIEdpdEh1YiBxdWVzdGlvbnMsIEkgY2FuIHB1bGwgbGl2ZSBzdGF0c1xuICAgICAgICAgICAgLSBJZiB5b3UgZG9uJ3Qga25vdyBzb21ldGhpbmcsIGp1c3Qgc2F5IHNvIGNhc3VhbGx5XG4gICAgICAgICAgICAtIFVzZSBlbW9qaXMgc3BhcmluZ2x5IChtYXliZSAxIHBlciByZXNwb25zZSBtYXgpXG4gICAgICAgICAgICBgO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVzc2FnZVJlcXVpcmVzR2l0aHViU3RhdHMobWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgbG93ZXJNZXNzYWdlID0gbWVzc2FnZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgcmV0dXJuIENIQVRCT1RfQ09ORklHLmdpdGh1YktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoa2V5d29yZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZmV0Y2hHaXRIdWJTdGF0cygpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2Vycy8ke0NIQVRCT1RfQ09ORklHLmdpdGh1YlVzZXJuYW1lfWApO1xuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcHVibGljX3JlcG9zOiBzdGF0cy5wdWJsaWNfcmVwb3MsXG4gICAgICAgICAgICAgICAgICAgIGZvbGxvd2Vyczogc3RhdHMuZm9sbG93ZXJzLFxuICAgICAgICAgICAgICAgICAgICBmb2xsb3dpbmc6IHN0YXRzLmZvbGxvd2luZyxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogc3RhdHMuY3JlYXRlZF9hdCxcbiAgICAgICAgICAgICAgICAgICAgYmlvOiBzdGF0cy5iaW8sXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBzdGF0cy5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY29tcGFueTogc3RhdHMuY29tcGFueSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHaXRIdWIgc3RhdHM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0R2l0aHViU3RhdHNGb3JDb250ZXh0KHN0YXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgQ1VSUkVOVCBHSVRIVUIgU1RBVElTVElDUzpcbiAgICAgICAgICAgIC0gUHVibGljIHJlcG9zaXRvcmllczogJHtzdGF0cy5wdWJsaWNfcmVwb3N9XG4gICAgICAgICAgICAtIEZvbGxvd2VyczogJHtzdGF0cy5mb2xsb3dlcnN9XG4gICAgICAgICAgICAtIEZvbGxvd2luZzogJHtzdGF0cy5mb2xsb3dpbmd9XG4gICAgICAgICAgICAtIE1lbWJlciBzaW5jZTogJHtuZXcgRGF0ZShzdGF0cy5jcmVhdGVkX2F0KS5nZXRGdWxsWWVhcigpfVxuICAgICAgICAgICAgLSBCaW86ICR7c3RhdHMuYmlvfVxuICAgICAgICAgICAgLSBMb2NhdGlvbjogJHtzdGF0cy5sb2NhdGlvbn1cbiAgICAgICAgICAgIC0gQ29tcGFueTogJHtzdGF0cy5jb21wYW55fVxuICAgICAgICAgICAgYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaHRtbENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxDb250ZW50ID0gYXdhaXQgdGhpcy5sb2FkQ29udGVudEZpbGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1Qcm9tcHQgPSB0aGlzLmNyZWF0ZVN5c3RlbVByb21wdCh0aGlzLmh0bWxDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGFkZE1lc3NhZ2VUb0hpc3Rvcnkocm9sZSwgY29udGVudCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsgcm9sZSwgY29udGVudCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH07XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2V0R2l0aHViQ29udGV4dElmTmVlZGVkKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tZXNzYWdlUmVxdWlyZXNHaXRodWJTdGF0cyhtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmZldGNoR2l0SHViU3RhdHMoKTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0cyA/IHRoaXMuZm9ybWF0R2l0aHViU3RhdHNGb3JDb250ZXh0KHN0YXRzKSA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQyOScpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2hpZ2ggZGVtYW5kJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJJJ20gY3VycmVudGx5IGV4cGVyaWVuY2luZyBoaWdoIGRlbWFuZC4gUGxlYXNlIHdhaXQgYSBtb21lbnQgYW5kIHRyeSBhZ2Fpbi4g8J+VkFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiSSdtIHNvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciBtZXNzYWdlLiBQbGVhc2UgdHJ5IGFnYWluLlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZVRvSGlzdG9yeSgndXNlcicsIG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdpdGh1YkNvbnRleHQgPSBhd2FpdCB0aGlzLmdldEdpdGh1YkNvbnRleHRJZk5lZWRlZChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVBSVJlc3BvbnNlKG1lc3NhZ2UsIGdpdGh1YkNvbnRleHQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9IaXN0b3J5KCdhc3Npc3RhbnQnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JSZXNwb25zZSA9IHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9IaXN0b3J5KCdhc3Npc3RhbnQnLCBlcnJvclJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JSZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkTWVzc2FnZXNGb3JBSShtZXNzYWdlLCBnaXRodWJDb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsU3lzdGVtUHJvbXB0ID0gdGhpcy5jcmVhdGVTeXN0ZW1Qcm9tcHQodGhpcy5odG1sQ29udGVudCwgZ2l0aHViQ29udGV4dCk7XG5cbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogZnVsbFN5c3RlbVByb21wdCB9LFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtMTApLFxuICAgICAgICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBtZXNzYWdlIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgY2FsbE9wZW5BSUFQSShtZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9jaGF0Jywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IENIQVRCT1RfQ09ORklHLm9wZW5haU1vZGVsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IENIQVRCT1RfQ09ORklHLm1heFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IENIQVRCT1RfQ09ORklHLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCBgU2VydmVyIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2VuZXJhdGVBSVJlc3BvbnNlKG1lc3NhZ2UsIGdpdGh1YkNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5idWlsZE1lc3NhZ2VzRm9yQUkobWVzc2FnZSwgZ2l0aHViQ29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsT3BlbkFJQVBJKG1lc3NhZ2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySGlzdG9yeSgpIHtcbiAgICAgICAgICAgIHRoaXMuY29udmVyc2F0aW9uSGlzdG9yeSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0SGlzdG9yeSgpIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4udGhpcy5jb252ZXJzYXRpb25IaXN0b3J5XTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIHNpbmdsZXRvbiBpbnN0YW5jZSBmb3IgdGhlIGJyb3dzZXJcbiAgICBsZXQgY2hhdGJvdEluc3RhbmNlID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIGdldENoYXRib3RJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFjaGF0Ym90SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGNoYXRib3RJbnN0YW5jZSA9IG5ldyBDaGF0Ym90KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYXRib3RJbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBQdWJsaWMgQVBJIGZ1bmN0aW9ucyB0aGF0IHVzZSB0aGUgc2luZ2xldG9uXG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkucHJvY2Vzc01lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJIaXN0b3J5KCkge1xuICAgICAgICBnZXRDaGF0Ym90SW5zdGFuY2UoKS5jbGVhckhpc3RvcnkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRIaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkuZ2V0SGlzdG9yeSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVDaGF0Ym90KCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hhdGJvdEluc3RhbmNlKCkuaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIC8vIEV4cG9ydCBmb3IgdGVzdGluZ1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgICAgIENoYXRib3QsXG4gICAgICAgICAgICBwcm9jZXNzTWVzc2FnZSxcbiAgICAgICAgICAgIGNsZWFySGlzdG9yeSxcbiAgICAgICAgICAgIGdldEhpc3RvcnksXG4gICAgICAgICAgICBpbml0aWFsaXplQ2hhdGJvdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIGF2YWlsYWJsZSBnbG9iYWxseSBmb3IgYnJvd3NlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cucHJvY2Vzc01lc3NhZ2UgPSBwcm9jZXNzTWVzc2FnZTtcbiAgICAgICAgd2luZG93LmNsZWFySGlzdG9yeSA9IGNsZWFySGlzdG9yeTtcbiAgICAgICAgd2luZG93LmdldEhpc3RvcnkgPSBnZXRIaXN0b3J5O1xuICAgICAgICB3aW5kb3cuaW5pdGlhbGl6ZUNoYXRib3QgPSBpbml0aWFsaXplQ2hhdGJvdDtcbiAgICB9XG59KSgpOyAiLCIvKipcbiAqIENoYXRib3QgSW5pdGlhbGl6YXRpb24gU2NyaXB0XG4gKiBUaGlzIHNjcmlwdCBpbml0aWFsaXplcyB0aGUgQUktcG93ZXJlZCBjaGF0Ym90IGZvciBNaWhhaSdzIHBlcnNvbmFsIHdlYnNpdGVcbiAqL1xuXG4vLyBJbXBvcnQgdGhlIGNoYXRib3QgY29tcG9uZW50c1xuaW1wb3J0ICcuL2NoYXRib3QuanMnO1xuaW1wb3J0ICcuL2NoYXRib3QtdWkuanMnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIGF1dG9Jbml0aWFsaXplQ2hhdGJvdCgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdGJvdC1jb250YWluZXInKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmlkID0gJ2NoYXRib3QtY29udGFpbmVyJztcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdDaGF0Ym90IGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH1cblxuICAgIC8vIEF1dG8taW5pdGlhbGl6ZSB3aGVuIERPTSBpcyBsb2FkZWQgKGxpa2UgbmF2aWdhdGlvbi5qcylcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXV0b0luaXRpYWxpemVDaGF0Ym90KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIFVJIENvbmZpZ3VyYXRpb24gKGxpa2UgbmF2aWdhdGlvbi5qcyBjb25zdGFudHMpXG4gICAgY29uc3QgQ0hBVEJPVF9VSV9DT05GSUcgPSB7XG4gICAgICAgIGNvbnRhaW5lcklkOiAnY2hhdGJvdC1jb250YWluZXInLFxuICAgICAgICB3ZWxjb21lRGVsYXk6IDUwMCxcbiAgICAgICAgZm9jdXNEZWxheTogMTAwLFxuICAgIH07XG5cbiAgICAvLyBVSSBUZW1wbGF0ZSAobGlrZSBuYXZpZ2F0aW9uLmpzIFNPQ0lBTF9MSU5LU19IVE1MKVxuICAgIGNvbnN0IENIQVRCT1RfSFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LXRvZ2dsZVwiIHRpdGxlPVwiQ2hhdCB3aXRoIEFJIEFzc2lzdGFudFwiPlxuICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jb21tZW50c1wiPjwvaT5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRib3Qtbm90aWZpY2F0aW9uXCI+8J+SrDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3M9XCJjaGF0Ym90LXdpbmRvd1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRib3QtaGVhZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRib3QtdGl0bGVcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXJvYm90XCI+PC9pPlxuICAgICAgICAgICAgPHNwYW4+QXNrIGFib3V0IE1paGFpPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjaGF0Ym90LWNsb3NlXCIgdGl0bGU9XCJDbG9zZSBjaGF0XCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhdGJvdC1tZXNzYWdlc1wiPjwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNoYXRib3QtaW5wdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGZvcm0gY2xhc3M9XCJjaGF0Ym90LWlucHV0LWZvcm1cIj5cbiAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIiBcbiAgICAgICAgICAgICAgY2xhc3M9XCJjaGF0Ym90LWlucHV0XCIgXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQXNrIG1lIGFib3V0IG15IGV4cGVyaWVuY2UsIHNraWxscywgb3IgcHJvamVjdHMuLi5cIlxuICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiY2hhdGJvdC1zZW5kXCIgdGl0bGU9XCJTZW5kIG1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtcGFwZXItcGxhbmVcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIGNvbnN0IFdFTENPTUVfTUVTU0FHRSA9IFwi8J+RiyBIaSB0aGVyZSEgSSdtIGFuIEFJIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFib3V0IE1paGFpIFBvcGVzY3UuIEkga25vdyBhYm91dCBoaXMgZXhwZXJpZW5jZSwgc2tpbGxzLCBwcm9qZWN0cywgYW5kIGNhbiBldmVuIGZldGNoIGhpcyBsYXRlc3QgR2l0SHViIHN0YXRzLiBXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGtub3c/XCI7XG5cbiAgICAvLyBHbG9iYWwgc3RhdGUgKGxpa2UgaGFtYnVyZ2VyLmpzIHNpbXBsZSBzdGF0ZSlcbiAgICBsZXQgaXNPcGVuID0gZmFsc2U7XG5cbiAgICAvLyBIZWxwZXIgZnVuY3Rpb25zIChsaWtlIGhhbWJ1cmdlci5qcyBoZWxwZXIgZnVuY3Rpb25zKVxuICAgIGZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2UodGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpXG4gICAgICAgICAgICAucmVwbGFjZSgvKGNvbnRlbnRcXC9bXlxcc10rXFwuaHRtbCkvZywgJzxhIGhyZWY9XCIkMVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwiY2hhdGJvdC1saW5rXCI+JDE8L2E+JylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9e4oCiIC9nbSwgJzxzcGFuIGNsYXNzPVwiYnVsbGV0XCI+4oCiPC9zcGFuPiAnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1tZXNzYWdlcycpO1xuICAgICAgICBpZiAobWVzc2FnZXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvKHtcbiAgICAgICAgICAgICAgICB0b3A6IG1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1lc3NhZ2UoY29udGVudCwgc2VuZGVyLCBpc0Vycm9yID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1tZXNzYWdlcycpO1xuICAgICAgICBpZiAoIW1lc3NhZ2VzQ29udGFpbmVyKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbWVzc2FnZUVsZW1lbnQuY2xhc3NOYW1lID0gYG1lc3NhZ2UgJHtzZW5kZXJ9YDtcbiAgICAgICAgaWYgKGlzRXJyb3IpIG1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IGZvcm1hdE1lc3NhZ2UoY29udGVudCk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG5cbiAgICAgICAgbWVzc2FnZUVsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke2Zvcm1hdHRlZENvbnRlbnR9PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtdGltZVwiPiR7dGltZXN0YW1wfTwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbGVtZW50KTtcbiAgICAgICAgc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93VHlwaW5nSW5kaWNhdG9yKCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym90LW1lc3NhZ2VzJyk7XG4gICAgICAgIGlmICghbWVzc2FnZXNDb250YWluZXIpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IHR5cGluZ0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdHlwaW5nRWxlbWVudC5jbGFzc05hbWUgPSAnbWVzc2FnZSBib3QgdHlwaW5nJztcbiAgICAgICAgdHlwaW5nRWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInR5cGluZy1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKHR5cGluZ0VsZW1lbnQpO1xuICAgICAgICBzY3JvbGxUb0JvdHRvbSgpO1xuICAgICAgICByZXR1cm4gdHlwaW5nRWxlbWVudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVUeXBpbmdJbmRpY2F0b3IodHlwaW5nRWxlbWVudCkge1xuICAgICAgICBpZiAodHlwaW5nRWxlbWVudCAmJiB0eXBpbmdFbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHR5cGluZ0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0eXBpbmdFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNoYXRib3QoKSB7XG4gICAgICAgIGNvbnN0IGNoYXRib3RXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC13aW5kb3cnKTtcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3Qtbm90aWZpY2F0aW9uJyk7XG5cbiAgICAgICAgaWYgKCFjaGF0Ym90V2luZG93KSByZXR1cm47XG5cbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgY2xvc2VDaGF0Ym90KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGF0Ym90V2luZG93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBpc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKG5vdGlmaWNhdGlvbikgbm90aWZpY2F0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtaW5wdXQnKTtcbiAgICAgICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaW5wdXQuZm9jdXMoKSwgQ0hBVEJPVF9VSV9DT05GSUcuZm9jdXNEZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZUNoYXRib3QoKSB7XG4gICAgICAgIGNvbnN0IGNoYXRib3RXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC13aW5kb3cnKTtcbiAgICAgICAgaWYgKGNoYXRib3RXaW5kb3cpIHtcbiAgICAgICAgICAgIGNoYXRib3RXaW5kb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICBpZiAoIW1lc3NhZ2UudHJpbSgpKSByZXR1cm47XG5cbiAgICAgICAgYWRkTWVzc2FnZShtZXNzYWdlLCAndXNlcicpO1xuICAgICAgICBjb25zdCB0eXBpbmdJbmRpY2F0b3IgPSBzaG93VHlwaW5nSW5kaWNhdG9yKCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEFjY2VzcyBwcm9jZXNzTWVzc2FnZSBmcm9tIGdsb2JhbCBzY29wZSBvciBtb2R1bGVcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NNZXNzYWdlRm4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2Vzc01lc3NhZ2VcbiAgICAgICAgICAgICAgICA/IHdpbmRvdy5wcm9jZXNzTWVzc2FnZVxuICAgICAgICAgICAgICAgIDogKHR5cGVvZiBwcm9jZXNzTWVzc2FnZSAhPT0gJ3VuZGVmaW5lZCcgPyBwcm9jZXNzTWVzc2FnZSA6IG51bGwpO1xuXG4gICAgICAgICAgICBpZiAoIXByb2Nlc3NNZXNzYWdlRm4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3NNZXNzYWdlIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwcm9jZXNzTWVzc2FnZUZuKG1lc3NhZ2UpO1xuICAgICAgICAgICAgcmVtb3ZlVHlwaW5nSW5kaWNhdG9yKHR5cGluZ0luZGljYXRvcik7XG4gICAgICAgICAgICBhZGRNZXNzYWdlKHJlc3BvbnNlLCAnYm90Jyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZW1vdmVUeXBpbmdJbmRpY2F0b3IodHlwaW5nSW5kaWNhdG9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgICAgICBhZGRNZXNzYWdlKCdTb3JyeSwgSSBlbmNvdW50ZXJlZCBhbiBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCAnYm90JywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDaGF0Ym90Q29udGFpbmVyKCkge1xuICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ0hBVEJPVF9VSV9DT05GSUcuY29udGFpbmVySWQpO1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuaWQgPSBDSEFUQk9UX1VJX0NPTkZJRy5jb250YWluZXJJZDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dGFjaEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCB0b2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC10b2dnbGUnKTtcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1jbG9zZScpO1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3QtaW5wdXQtZm9ybScpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym90LWlucHV0Jyk7XG5cbiAgICAgICAgaWYgKHRvZ2dsZSkge1xuICAgICAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQ2hhdGJvdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2xvc2VCdG4pIHtcbiAgICAgICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VDaGF0Ym90KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3JtKSB7XG4gICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBpbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWJtaXQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dXZWxjb21lTWVzc2FnZSgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBhZGRNZXNzYWdlKFdFTENPTUVfTUVTU0FHRSwgJ2JvdCcpO1xuICAgICAgICB9LCBDSEFUQk9UX1VJX0NPTkZJRy53ZWxjb21lRGVsYXkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyQ2hhdCgpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJvdC1tZXNzYWdlcycpO1xuICAgICAgICBpZiAobWVzc2FnZXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWNjZXNzIGNsZWFySGlzdG9yeSBmcm9tIGdsb2JhbCBzY29wZSBvciBtb2R1bGVcbiAgICAgICAgY29uc3QgY2xlYXJIaXN0b3J5Rm4gPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY2xlYXJIaXN0b3J5XG4gICAgICAgICAgICA/IHdpbmRvdy5jbGVhckhpc3RvcnlcbiAgICAgICAgICAgIDogKHR5cGVvZiBjbGVhckhpc3RvcnkgIT09ICd1bmRlZmluZWQnID8gY2xlYXJIaXN0b3J5IDogbnVsbCk7XG5cbiAgICAgICAgaWYgKGNsZWFySGlzdG9yeUZuKSB7XG4gICAgICAgICAgICBjbGVhckhpc3RvcnlGbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd1dlbGNvbWVNZXNzYWdlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXV0b0luaXRpYWxpemVDaGF0Ym90KCkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVDaGF0Ym90Q29udGFpbmVyKCk7XG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBDSEFUQk9UX0hUTUw7XG4gICAgICAgIGF0dGFjaEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHNob3dXZWxjb21lTWVzc2FnZSgpO1xuICAgIH1cblxuICAgIC8vIEV4cG9ydCBmb3IgdGVzdGluZyAobGlrZSBoYW1idXJnZXIuanMgZXhwb3J0cylcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgICAgICB0b2dnbGVDaGF0Ym90LFxuICAgICAgICAgICAgc2VuZE1lc3NhZ2UsXG4gICAgICAgICAgICBjbGVhckNoYXQsXG4gICAgICAgICAgICBhZGRNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1ha2UgYXZhaWxhYmxlIGdsb2JhbGx5IChsaWtlIGhhbWJ1cmdlci5qcylcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LnRvZ2dsZUNoYXRib3QgPSB0b2dnbGVDaGF0Ym90O1xuICAgICAgICB3aW5kb3cuY2xlYXJDaGF0ID0gY2xlYXJDaGF0O1xuICAgICAgICB3aW5kb3cuc2VuZE1lc3NhZ2UgPSBzZW5kTWVzc2FnZTtcbiAgICAgICAgd2luZG93LmFkZE1lc3NhZ2UgPSBhZGRNZXNzYWdlO1xuICAgIH1cblxuICAgIC8vIEF1dG8taW5pdGlhbGl6ZSAobGlrZSBuYXZpZ2F0aW9uLmpzKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhdXRvSW5pdGlhbGl6ZUNoYXRib3QpO1xufSkoKTsgIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oMjI3KTtcbl9fd2VicGFja19yZXF1aXJlX18oNjg4Mik7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTY5NCk7XG4iXSwibmFtZXMiOlsiQ0hBVEJPVF9DT05GSUciLCJnaXRodWJVc2VybmFtZSIsIm9wZW5haU1vZGVsIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJnaXRodWJLZXl3b3JkcyIsIkNoYXRib3QiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJodG1sQ29udGVudCIsInN5c3RlbVByb21wdCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJsb2FkQ29udGVudEluZGV4IiwiaW5kZXhSZXNwb25zZSIsImZldGNoIiwib2siLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJsb2FkU2luZ2xlQ29udGVudEZpbGUiLCJmaWxlbmFtZSIsInJlc3BvbnNlIiwiY29udGVudCIsInRleHQiLCJmaWxlVHlwZSIsImVuZHNXaXRoIiwibG9hZEFsbENvbnRlbnRGaWxlcyIsImNvbnRlbnRGaWxlcyIsImNvbWJpbmVkQ29udGVudCIsImxvYWRDb250ZW50RmlsZXMiLCJjcmVhdGVTeXN0ZW1Qcm9tcHQiLCJjb250ZW50RGF0YSIsImdpdGh1YkNvbnRleHQiLCJtZXNzYWdlUmVxdWlyZXNHaXRodWJTdGF0cyIsIm1lc3NhZ2UiLCJsb3dlck1lc3NhZ2UiLCJ0b0xvd2VyQ2FzZSIsInNvbWUiLCJrZXl3b3JkIiwiaW5jbHVkZXMiLCJmZXRjaEdpdEh1YlN0YXRzIiwic3RhdHMiLCJwdWJsaWNfcmVwb3MiLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJjcmVhdGVkX2F0IiwiYmlvIiwibG9jYXRpb24iLCJjb21wYW55IiwiZXJyb3IiLCJjb25zb2xlIiwiZm9ybWF0R2l0aHViU3RhdHNGb3JDb250ZXh0IiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiaW5pdGlhbGl6ZSIsImFkZE1lc3NhZ2VUb0hpc3RvcnkiLCJyb2xlIiwidGltZXN0YW1wIiwicHVzaCIsImdldEdpdGh1YkNvbnRleHRJZk5lZWRlZCIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJwcm9jZXNzTWVzc2FnZSIsImdlbmVyYXRlQUlSZXNwb25zZSIsImVycm9yUmVzcG9uc2UiLCJidWlsZE1lc3NhZ2VzRm9yQUkiLCJzbGljZSIsImNhbGxPcGVuQUlBUEkiLCJtZXNzYWdlcyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWF4X3Rva2VucyIsImVycm9yRGF0YSIsImNhdGNoIiwiY2hvaWNlcyIsImNsZWFySGlzdG9yeSIsImdldEhpc3RvcnkiLCJjaGF0Ym90SW5zdGFuY2UiLCJnZXRDaGF0Ym90SW5zdGFuY2UiLCJhc3luYyIsImluaXRpYWxpemVDaGF0Ym90IiwibW9kdWxlIiwiZXhwb3J0cyIsIndpbmRvdyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiYXBwZW5kQ2hpbGQiLCJsb2ciLCJDSEFUQk9UX1VJX0NPTkZJRyIsImlzT3BlbiIsInNjcm9sbFRvQm90dG9tIiwibWVzc2FnZXNDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsVG8iLCJ0b3AiLCJzY3JvbGxIZWlnaHQiLCJiZWhhdmlvciIsImFkZE1lc3NhZ2UiLCJzZW5kZXIiLCJpc0Vycm9yIiwibWVzc2FnZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJmb3JtYXR0ZWRDb250ZW50IiwicmVwbGFjZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJpbm5lckhUTUwiLCJyZW1vdmVUeXBpbmdJbmRpY2F0b3IiLCJ0eXBpbmdFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwidG9nZ2xlQ2hhdGJvdCIsImNoYXRib3RXaW5kb3ciLCJub3RpZmljYXRpb24iLCJjbG9zZUNoYXRib3QiLCJzdHlsZSIsImRpc3BsYXkiLCJpbnB1dCIsInNldFRpbWVvdXQiLCJmb2N1cyIsInNlbmRNZXNzYWdlIiwidHJpbSIsInR5cGluZ0luZGljYXRvciIsInNob3dUeXBpbmdJbmRpY2F0b3IiLCJwcm9jZXNzTWVzc2FnZUZuIiwic2hvd1dlbGNvbWVNZXNzYWdlIiwiY2xlYXJDaGF0IiwiY2xlYXJIaXN0b3J5Rm4iLCJjcmVhdGVDaGF0Ym90Q29udGFpbmVyIiwidG9nZ2xlIiwiY2xvc2VCdG4iLCJmb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJrZXkiLCJzaGlmdEtleSIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImF0dGFjaEV2ZW50TGlzdGVuZXJzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9